(this["webpackJsonponline-store"]=this["webpackJsonponline-store"]||[]).push([[0],{30:function(e,t,a){e.exports=a(61)},35:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(27),i=a.n(c),o=(a(35),a(13)),s=a(6),u=a(12),l=a.n(u),m=a(17),d=a(2),p=a(3),h=a(5),f=a(4),v=a(20),b=(a(37),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){t.preventDefault();var a=e.props,n=a.searchTerm;(0,a.onClick)("",n)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.searchTerm,a=e.onChange;return r.a.createElement("form",{className:"search-form"},r.a.createElement("input",{className:"search-input",type:"text",value:t,onChange:a,"data-testid":"query-input"}),r.a.createElement("button",{className:"search-button",type:"submit",onClick:this.handleClick,"data-testid":"query-button"},r.a.createElement(v.a,null)))}}]),a}(r.a.Component)),g=(a(38),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.categoryName,a=e.categoryId,n=e.selectedCategory,c=e.onChange,i=n===a;return r.a.createElement("li",null,r.a.createElement("label",{className:i?"filter-item selected":"filter-item",htmlFor:a,"data-testid":"category"},r.a.createElement("input",{className:"item-selector",id:a,type:"radio",name:"category",value:a,checked:i,onChange:c}),t))}}]),a}(r.a.Component)),C="https://api.mercadolibre.com/sites/MLB";function E(){return y.apply(this,arguments)}function y(){return(y=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/categories"));case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return j.apply(this,arguments)}function j(){return(j=Object(m.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/search?category=").concat(t,"&q=").concat(a));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(39);var k=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).fetchCategories=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:(t=e.sent)&&n.setState({categories:t});case 4:case"end":return e.stop()}}),e)}))),n.state={categories:[]},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchCategories()}},{key:"render",value:function(){var e=this.state.categories,t=this.props,a=t.selectedCategory,n=t.onChange;return r.a.createElement("div",{className:"sidebar"},r.a.createElement("ul",{className:"filter"},e.map((function(e){var t=e.id,c=e.name;return r.a.createElement(g,{key:t,categoryName:c,categoryId:t,selectedCategory:a,onChange:n})}))))}}]),a}(r.a.Component),N=a(14),I=(a(40),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.itemCount;return r.a.createElement(o.b,{key:e,className:"cart-link",to:"/cart","data-testid":"shopping-cart-button"},r.a.createElement(N.d,null),r.a.createElement("span",{"data-testid":"shopping-cart-size"},e))}}]),a}(r.a.Component)),S=a(8),P=a(15),A=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]},x=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):{}},w=function(e,t){localStorage.setItem(e,JSON.stringify(t))},R=(a(46),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).checkCart=function(){var e=A("cartItems"),t=n.props.product;n.setState({isAtCart:e.some((function(e){return e.id===t.id}))})},n.handleClick=function(){var e=n.state.isAtCart,t=n.props,a=t.product,r=t.updateItemCount,c=A("cartItems");if(e){var i=c.map((function(e){return e.id===a.id?Object(S.a)(Object(S.a)({},e),{},{amount:e.amount+1}):e}));w("cartItems",i),r()}else{var o=[].concat(Object(P.a)(c),[Object(S.a)(Object(S.a)({},a),{},{amount:1})]);n.setState({isAtCart:!0}),w("cartItems",o),r()}},n.handleProductClick=function(){var e=n.props,t=e.product,a=e.history;w("productDetails",t),a.push("/product/".concat(t.id))},n.handleProductKeyDown=function(e){13===e.keyCode&&n.handleProductClick()},n.state={isAtCart:!1},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.checkCart()}},{key:"render",value:function(){var e=this.state.isAtCart,t=this.props.product;return r.a.createElement("div",{className:"product-card","data-testid":"product",key:t.id},r.a.createElement("div",{className:"product-info","data-testid":"product-detail-link",onClick:this.handleProductClick,onKeyDown:this.handleProductKeyDown,role:"link",tabIndex:0},r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{className:"product-image",src:t.thumbnail,alt:"imagem de ".concat(t.title)})),r.a.createElement("p",null,t.title),r.a.createElement("p",null,"R$"," ",t.price)),r.a.createElement("button",{className:"cart-button",type:"button","data-testid":"product-add-to-cart",onClick:this.handleClick},"ADICIONAR AO CARRINHO"),t.freeShipping&&r.a.createElement("div",{className:"free-shipping"},r.a.createElement(v.b,{className:"shipping-icon"}),r.a.createElement("p",{"data-testid":"free-shipping"},"FRETE GR\xc1TIS")),e&&r.a.createElement("div",{className:"at-cart"},r.a.createElement(N.d,{className:"at-cart-icon"})))}}]),a}(r.a.Component)),q=(a(47),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).updateItemCount=function(){var t=A("cartItems").reduce((function(e,t){return e+t.amount}),0);e.setState({itemCount:t})},e.state={itemCount:0},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.updateItemCount()}},{key:"render",value:function(){var e=this,t=this.state.itemCount,a=this.props,n=a.productList,c=a.history;return n.length?r.a.createElement("div",null,r.a.createElement(I,{itemCount:t}),r.a.createElement("div",{className:"products"},n.map((function(t){return r.a.createElement(R,{key:t.id,history:c,product:t,updateItemCount:e.updateItemCount})})))):r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria."),r.a.createElement(I,{itemCount:t}))}}]),a}(r.a.Component)),D=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleSearchTermChange=function(e){var t=e.target;n.setState({searchTerm:t.value})},n.handleCategoryChange=function(e){var t=e.target;t.value&&n.listProducts(t.value,""),n.setState({selectedCategory:t.value})},n.listProducts=function(){var e=Object(m.a)(l.a.mark((function e(t,a){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,a);case 2:r=e.sent,c=r.results.map((function(e){return{id:e.id,title:e.title,thumbnail:e.thumbnail,price:e.price,attributes:e.attributes,availableQuantity:e.available_quantity,freeShipping:e.shipping.free_shipping}})),n.setState({productList:c});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={productList:[],searchTerm:"",selectedCategory:""},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.state,t=e.searchTerm,a=e.productList,n=e.selectedCategory;return r.a.createElement("div",{className:"home-page"},r.a.createElement(k,{selectedCategory:n,onChange:this.handleCategoryChange}),r.a.createElement("div",{className:"main-content"},r.a.createElement(b,{searchTerm:t,onChange:this.handleSearchTermChange,onClick:this.listProducts}),r.a.createElement(q,Object.assign({productList:a},this.props))))}}]),a}(r.a.Component),F=a(29),T=(a(48),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).getNewQuantity=function(e,t){switch(t){case"increment":return e+1;case"decrement":return e-1;default:return e}},n.handleClick=function(e){var t=e.target,a=n.props,r=a.availableQuantity,c=a.updateItemAmount,i=a.id,o=n.state.quantity,s=t.dataset.action,u=n.getNewQuantity(o,s);u>0&&u<=r&&(n.setState({quantity:u}),c(u,i))},n.state={quantity:e.amount},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.title,n=e.price,c=e.thumbnail,i=e.removeItemFromCart,o=this.state.quantity;return r.a.createElement("div",{className:"cart-item"},r.a.createElement("button",{className:"remove-item",type:"button",onClick:function(){return i(t,o)}},r.a.createElement(F.a,null)),r.a.createElement("img",{className:"item-image",src:c,alt:a}),r.a.createElement("p",{className:"item-title","data-testid":"shopping-cart-product-name"},a),r.a.createElement("div",{className:"quantity-container"},r.a.createElement("button",{type:"button","data-action":"decrement",onClick:this.handleClick,"data-testid":"product-decrease-quantity"},r.a.createElement(N.b,null)),r.a.createElement("p",{"data-testid":"shopping-cart-product-quantity"},o),r.a.createElement("button",{type:"button","data-action":"increment",onClick:this.handleClick,"data-testid":"product-increase-quantity"},r.a.createElement(N.c,null))),r.a.createElement("p",{className:"item-price"},"R$"," ",n))}}]),a}(r.a.Component)),L=(a(49),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(o.b,{className:"home-icon",to:"/"},r.a.createElement(N.a,null))}}]),a}(n.Component)),M=(a(50),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).fetchProducts=function(){var t=A("cartItems");e.setState({cartItems:t}),e.getTotalPrice(t)},e.getTotalPrice=function(t){var a=t.reduce((function(e,t){return e+t.price*t.amount}),0),n=Number(a.toFixed(2));e.setState({totalPrice:n}),w("totalPrice",n)},e.removeItemFromCart=function(t){var a=e.state.cartItems.filter((function(e){return e.id!==t}));e.setState({cartItems:Object(P.a)(a)}),e.getTotalPrice(a),w("cartItems",a)},e.updateItemAmount=function(t,a){var n=e.state.cartItems.map((function(e){return e.id===a?Object(S.a)(Object(S.a)({},e),{},{amount:t}):e}));e.setState({cartItems:Object(P.a)(n)}),e.getTotalPrice(n),w("cartItems",n)},e.state={cartItems:[],totalPrice:0},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchProducts()}},{key:"render",value:function(){var e=this,t=this.state,a=t.cartItems,n=t.totalPrice;return r.a.createElement("div",{className:"cart-content"},r.a.createElement(L,null),r.a.createElement("div",{className:"cart-items"},0!==a.length?a.map((function(t){return r.a.createElement(T,{key:t.id,id:t.id,title:t.title,price:t.price,thumbnail:t.thumbnail,amount:t.amount,availableQuantity:t.availableQuantity,removeItemFromCart:e.removeItemFromCart,updateItemAmount:e.updateItemAmount})})):r.a.createElement("p",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"),r.a.createElement("p",{className:"total-price"},"Total: R$ ".concat(n)),r.a.createElement(o.b,{className:"purchase",to:"/purchase","data-testid":"checkout-products"},"FINALIZAR COMPRA")))}}]),a}(r.a.Component)),$=a(19),Q=a(21),B=a.n(Q),J=(a(54),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleClick=function(t,a){t.preventDefault();var n=e.props.id;a(Object(S.a)(Object(S.a)({},e.state),{},{id:n})),e.setState({rating:0,comment:"",user:""})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object($.a)({},n,r))},e.handleStarChange=function(t){e.setState({rating:t})},e.state={rating:0,comment:"",user:""},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.rating,n=t.comment,c=t.user,i=this.props.addEvaluation;return r.a.createElement("div",{className:"evaluation-section"},r.a.createElement("h1",null,"Avalia\xe7\xf5es"),r.a.createElement("form",{className:"evaluation-form"},r.a.createElement("div",{className:"email-rating"},r.a.createElement("input",{id:"user",name:"user",type:"text",value:c,onChange:this.handleChange,placeholder:"Email"}),r.a.createElement(B.a,{rating:a,starRatedColor:"rgb(255, 194, 25)",starHoverColor:"rgb(255, 194, 25)",changeRating:this.handleStarChange,numberOfStars:5,name:"rating",starDimension:"2em",starSpacing:"0.5em"})),r.a.createElement("textarea",{id:"comment",name:"comment",value:n,onChange:this.handleChange,"data-testid":"product-detail-evaluation",placeholder:"Coment\xe1rios"}),r.a.createElement("button",{type:"submit",onClick:function(t){return e.handleClick(t,i)}},"AVALIAR")))}}]),a}(r.a.Component)),H=(a(55),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.comment,n=this.props.rating;return""===t&&(t="An\xf4nimo"),""===a&&(a="Usu\xe1rio n\xe3o teceu coment\xe1rios"),console.log(n),r.a.createElement("div",{className:"evaluation"},r.a.createElement("div",{className:"email-rating"},r.a.createElement("p",{className:"email"},t),r.a.createElement(B.a,{rating:Number(n),starRatedColor:"rgb(255, 194, 25)",starHoverColor:"rgb(255, 194, 25)",numberOfStars:5,name:"rating",starDimension:"1.5em",starSpacing:"0.5em"})),r.a.createElement("p",null,a))}}]),a}(r.a.Component)),z=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.evaluations;return r.a.createElement("div",null,e.map((function(e,t){return r.a.createElement(H,{key:t,user:e.user,rating:e.rating,comment:e.comment})})))}}]),a}(r.a.Component),K=(a(56),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).addEvaluation=function(t){var a=A("evaluations"),n=[].concat(Object(P.a)(a),[t]);w("evaluations",n),e.setState((function(e){return{evaluations:[].concat(Object(P.a)(e.evaluations),[t])}}))},e.getEvaluationsById=function(t){var a=A("evaluations").filter((function(e){return e.id===t}));e.setState({evaluations:a})},e.updateItemCount=function(){var t=A("cartItems").reduce((function(e,t){return e+t.amount}),0);e.setState({itemCount:t})},e.getProductFromLocalStorage=function(){var t=x("productDetails");e.getEvaluationsById(t.id),e.setState({loading:!1,product:t})},e.handleClick=function(){var t=e.state.product,a=A("cartItems");if(!a.some((function(e){return e.id===t.id}))){var n=[].concat(Object(P.a)(a),[Object(S.a)(Object(S.a)({},t),{},{amount:1})]);w("cartItems",n),e.updateItemCount()}},e.state={loading:!0,product:{},itemCount:0,evaluations:[]},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.getProductFromLocalStorage(),this.updateItemCount()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.product,n=e.itemCount,c=e.evaluations;return t?r.a.createElement("p",null,"Loading"):r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null),r.a.createElement(I,{itemCount:n}),r.a.createElement("div",{className:"product-details"},r.a.createElement("h1",{"data-testid":"product-detail-name"},a.title),r.a.createElement("p",{className:"product-price"},"R$"," ",a.price),r.a.createElement("div",{className:"product-main-info"},r.a.createElement("img",{src:a.thumbnail,alt:a.title}),r.a.createElement("div",{className:"product-attributes"},r.a.createElement("h1",null,"Especifica\xe7\xf5es t\xe9cnicas"),a.attributes.map((function(e){return r.a.createElement("p",{key:e.name},"".concat(e.name,": "),r.a.createElement("span",null,e.value_name))})))),r.a.createElement("button",{"data-testid":"product-detail-add-to-cart",type:"button",onClick:this.handleClick},"ADICIONAR AO CARRINHO"),r.a.createElement(J,{id:a.id,addEvaluation:this.addEvaluation}),r.a.createElement(z,{evaluations:c})))}}]),a}(r.a.Component)),_=(a(57),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.email,n=e.cpf,c=e.phone,i=e.postalCode,o=e.adress,s=e.onClick,u=e.onChange;return r.a.createElement("form",{className:"purchase-form"},r.a.createElement("h3",{className:"customer-info-header"},"Informa\xe7\xf5es do comprador"),r.a.createElement("div",{className:"customer-info"},r.a.createElement("input",{required:!0,name:"name",type:"text","data-testid":"checkout-fullname",onChange:u,value:t,placeholder:"Nome Completo",className:"name"}),r.a.createElement("input",{required:!0,name:"cpf",type:"text","data-testid":"checkout-cpf",placeholder:"CPF (apenas n\xfameros)",onChange:u,value:n,className:"cpf"}),r.a.createElement("input",{required:!0,name:"email",type:"email","data-testid":"checkout-email",onChange:u,value:a,placeholder:"Email",className:"email"}),r.a.createElement("input",{required:!0,name:"phone",type:"text","data-testid":"checkout-phone",onChange:u,value:c,placeholder:"Telefone",className:"phone"}),r.a.createElement("input",{required:!0,name:"postalCode",type:"text","data-testid":"checkout-cep",onChange:u,value:i,placeholder:"CEP (apenas n\xfameros)",className:"cep"}),r.a.createElement("input",{required:!0,name:"adress",type:"text","data-testid":"checkout-address",onChange:u,value:o,placeholder:"Endere\xe7o",className:"address"})),r.a.createElement("button",{type:"submit",onClick:s},"Finalizar Compra"))}}]),a}(r.a.Component)),W=(a(58),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.amount,a=e.price,n=e.thumbnail,c=e.title;return r.a.createElement("div",{className:"purchase-screen-item"},r.a.createElement("img",{src:n,alt:c,width:"50px"}),r.a.createElement("p",null,c),r.a.createElement("p",null,t),r.a.createElement("p",null,"R$ ".concat(a)))}}]),a}(r.a.Component)),G=(a(59),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).fetchProducts=function(){var t=A("cartItems"),a=x("totalPrice"),n=Number(a.toFixed(2));e.setState({items:t,totalPrice:n})},e.handleClick=function(t){t.preventDefault(),e.setState({items:[],name:"",email:"",cpf:"",phone:"",postalCode:"",adress:"",purchaseFinished:!0})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object($.a)({},n,r))},e.state={items:[],totalPrice:0,name:"",email:"",cpf:"",phone:"",postalCode:"",adress:"",purchaseFinished:!1},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchProducts()}},{key:"render",value:function(){var e=this.state,t=e.items,a=e.totalPrice,n=this.state,c=n.name,i=n.email,o=n.cpf,u=n.phone,l=n.postalCode,m=n.adress,d=n.purchaseFinished;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null),r.a.createElement("div",{className:"purchase-screen"},d?r.a.createElement(s.a,{to:"/"}):null,t.map((function(e){return r.a.createElement(W,{key:e.title,title:e.title,price:e.price,amount:e.amount,thumbnail:e.thumbnail})})),r.a.createElement("p",{className:"total-price"},"Total: R$ ".concat(a)),r.a.createElement(_,{name:c,email:i,cpf:o,phone:u,postalCode:l,adress:m,onClick:this.handleClick,onChange:this.handleChange})))}}]),a}(r.a.Component));a(60);var U=function(){return r.a.createElement(o.a,{basename:"/online-store"},r.a.createElement("div",{className:"App"},r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:D}),r.a.createElement(s.b,{exact:!0,path:"/cart",component:M}),r.a.createElement(s.b,{exact:!0,path:"/product/:id",component:K}),r.a.createElement(s.b,{exact:!0,path:"/purchase",component:G}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.faffa81c.chunk.js.map